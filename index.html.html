<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Installation Professionals | Get Free Quotes</title>
    <meta name="description" content="Connect with top-rated solar installation professionals. Get free quotes for residential and commercial solar panel installation.">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7f9;
            color: #333;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50 0%, #4a6491 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .main-content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .main-content h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .main-content p {
            color: #555;
            margin-bottom: 25px;
            font-size: 1.1rem;
        }
        
        .action-button {
            background: linear-gradient(135deg, #ff7e30 0%, #ff5f00 100%);
            color: white;
            border: none;
            padding: 18px 45px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 126, 48, 0.4);
            display: inline-block;
            margin: 15px 0;
        }
        
        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 126, 48, 0.5);
        }
        
        .action-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 40px 0;
        }
        
        .feature {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .feature h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .feature p {
            color: #666;
        }
        
        .info-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        
        .info-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .info-section p {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        footer {
            text-align: center;
            padding: 25px;
            background: #2c3e50;
            color: white;
            border-radius: 10px 10px 0 0;
            margin-top: auto;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            background: #ff6b6b;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            z-index: 1000;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.success {
            background: #4ecdc4;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
            vertical-align: middle;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .features {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2.2rem;
            }
            
            .action-button {
                padding: 15px 35px;
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>
    
    <header>
        <div class="container">
            <h1>Solar Installation Professionals</h1>
            <p>Connect with top-rated solar installers and get free quotes for your project</p>
        </div>
    </header>
    
    <div class="container">
        <section class="main-content">
            <h2>Find Solar Installers Near You</h2>
            <p>Click the button below to connect with certified solar professionals and get free quotes for your project</p>
            
            <button class="action-button" id="solarButton">
                Find Solar Installers
            </button>
            
            <p>We'll connect you with the best local solar installers for your needs</p>
            
            <div class="features">
                <div class="feature">
                    <h3>Free Quotes</h3>
                    <p>Get multiple quotes from local professionals with no obligation</p>
                </div>
                <div class="feature">
                    <h3>Quality Installers</h3>
                    <p>All installers in our network are certified and top-rated</p>
                </div>
                <div class="feature">
                    <h3>Save Money</h3>
                    <p>Reduce your energy bills with solar power</p>
                </div>
                <div class="feature">
                    <h3>Eco Friendly</h3>
                    <p>Reduce your carbon footprint with clean energy</p>
                </div>
            </div>
        </section>
        
        <section class="info-section">
            <h3>Why Choose Solar?</h3>
            <p>Solar energy can reduce your electricity bills, increase your property value, and help protect the environment. Our network of certified solar installers can help you find the right solution for your home or business.</p>
            
            <h3>How It Works</h3>
            <p>1. Click the button above to get started</p>
            <p>2. We'll connect you with top-rated solar installers in your area</p>
            <p>3. Receive free quotes and compare options</p>
            <p>4. Choose the best installer for your project</p>
        </section>
    </div>
    
    <footer>
        <div class="container">
            <p>Â© 2024 Solar Installation Professionals. All rights reserved.</p>
            <p>Contact us: info@solarinstallerpro.com</p>
        </div>
    </footer>

    <script>
        // Your Cloudflare Worker URL
        const WORKER_URL = 'https://new-worker-code.shoaibsoftengr99.workers.dev';
        
        // Show notification
        function showNotification(message, isError = true) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = isError ? '#ff6b6b' : '#4ecdc4';
            notification.className = isError ? 'notification show' : 'notification show success';
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Call the Cloudflare Worker to get the redirect URL using GET method
        async function callWorker() {
            try {
                // Add timestamp to prevent caching
                const response = await fetch(`${WORKER_URL}/redirect?t=${Date.now()}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`Worker responded with status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.success && data.redirectUrl) {
                    return data.redirectUrl;
                } else {
                    throw new Error(data.error || 'Failed to get redirect URL from worker');
                }
            } catch (error) {
                console.error('Error calling worker:', error);
                throw error;
            }
        }
        
        // Redirect using GET method with window.location
        function redirectWithGet(url) {
            // Show notification
            showNotification('Connecting you with solar installers...', false);
            
            // Use setTimeout to ensure the notification is visible
            setTimeout(() => {
                window.location.href = url;
            }, 1500);
        }
        
        // Main function to handle the button click
        async function handleButtonClick() {
            const button = document.getElementById('solarButton');
            const originalText = button.textContent;
            
            // Show loading state
            button.innerHTML = '<span class="loading"></span> Processing...';
            button.disabled = true;
            
            try {
                // Call the worker to get the redirect URL
                const targetUrl = await callWorker();
                
                // Use the redirect method
                redirectWithGet(targetUrl);
            } catch (error) {
                console.error('Redirect failed:', error);
                button.textContent = originalText;
                button.disabled = false;
                
                // Show error notification
                showNotification('Connection failed. Please try again.');
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const button = document.getElementById('solarButton');
            
            // Add click event listener to the button
            button.addEventListener('click', handleButtonClick);
        });
    </script>
</body>
</html>
